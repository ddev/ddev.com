---
import Terminal from "@components/Terminal.astro"
import Tabs from "@components/Tabs.astro"
import { Code } from "astro/components"
import CommunityCTA from "./CommunityCTA.astro"

export interface Props {
  latestVersion: string
}

const { latestVersion } = Astro.props
---

<div class="prose">
  <h2 class="text-3xl mt-24">Launch with a Provider</h2>

  <Tabs order={["Gitpod", "GitHub Codespaces"]}>
    <Fragment slot="Gitpod">
      <div class="prose pt-5">
        <p>
          <a href="https://www.gitpod.io/docs/getting-started" target="_blank"
            >Open any repository</a
          > using Gitpod and install DDEV:
        </p>
        <Terminal
          type="ubuntu"
          code={`$ curl -fsSL https://apt.fury.io/ddev/gpg.key | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/ddev.gpg > /dev/null\n$ echo "deb [signed-by=/etc/apt/trusted.gpg.d/ddev.gpg] https://apt.fury.io/ddev/ * *" | sudo tee /etc/apt/sources.list.d/ddev.list\n$ sudo apt update && sudo apt install -y ddev
`}
        />
      </div>
      <a href="https://gitpod.io/#https://github.com/ddev/ddev"
        ><img
          src="/img/open-in-gitpod.svg"
          alt="Open in Gitpod"
          class="drop-shadow-sm pb-4 my-4"
        />
      </a>
    </Fragment>
    <Fragment slot="GitHub Codespaces">
      <div class="prose py-5">
        <ol>
          <li>
            <a href="https://github.com/codespaces/new"
              >Create a new codespace</a
            > for your project or open an existing one.
          </li>
          <li>
            Edit the projectâ€™s <code>.devcontainer/devcontainer.json</code> file
            to include these two lines in the â€œfeaturesâ€ section:
            <Code
              code={`"features": {\n    "ghcr.io/devcontainers/features/docker-in-docker:1": {},\n    "ghcr.io/ddev/ddev/install-ddev:latest": {}\n},`}
              theme="nord"
              lang="json"
            />
          </li>
          <li>
            Save the file and rebuild the container by running VS Codeâ€™s
            â€œCodespaces: Rebuild Containerâ€ action. (<kbd>âŒ˜</kbd> + <kbd
              >SHIFT</kbd
            > + <kbd>P</kbd> on a Mac or <kbd>CTRL</kbd> + <kbd>SHIFT</kbd> + <kbd
              >P</kbd
            > on Windows, then search for â€œrebuildâ€.)
          </li>
        </ol>
      </div>
      <a
        href="https://github.com/codespaces/new?hide_repo_select=true&ref=20221220_codespaces&repo=80927419&machine=basicLinux32gb&location=WestUs2"
        ><img
          src="https://github.com/codespaces/badge.svg"
          alt="Open in GitHub Codespaces"
          class="pb-4 my-4"
        />
      </a>
    </Fragment>
  </Tabs>

  <p>Confirm that youâ€™ve now got DDEV installed: ğŸ‰</p>
  <Terminal code={`â†’ ddev -v\nddev version ${latestVersion}`} />
</div>

<div class="prose">
  <h2 class="text-3xl mt-24">Explore & Enjoy!</h2>

  <p>
    Take a peek at your projectâ€™s new <code>.ddev/</code> directory. You can add
    this to your repo to share your DDEV config, edit <code
      >.ddev/ddev.yaml</code
    > to change <a
      href="https://ddev.readthedocs.io/en/latest/users/configuration/config/"
      target="_blank">project options</a
    >, or even go about your business and pretend this folder doesnâ€™t exist.
  </p>

  <p>
    Run the <a
      href="https://ddev.readthedocs.io/en/latest/users/usage/commands/#help"
      target="_blank"
      >help command
    </a> (or plain <code>ddev</code>) to see the actions you can take with the
    CLI:
  </p>

  <Terminal code={`â†’ ddev -h`} />

  <p>
    Use the <a
      href="https://ddev.readthedocs.io/en/latest/users/usage/commands/#describe"
      target="_blank"
      >describe command
    </a> to see a projectâ€™s parts and database connection details:
  </p>

  <Terminal code={`â†’ ddev describe`} />

  <CommunityCTA />
</div>
