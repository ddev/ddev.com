---
import Terminal from "@components/Terminal.astro"
import CommunityCTA from "./CommunityCTA.astro"
import CtaButton from "@components/CtaButton.astro"

// Set the props for the "Create a Project" section
const itemNumber = "3/3";
const terminalType = "powershell-ubuntu";
const terminalSymbol = "$";

export interface Props {
  latestVersion: string
}

const { latestVersion } = Astro.props
---

<div class="prose dark:prose-invert">
  <p class="text-gray-600 mb-16 dark:text-slate-400">
    We‚Äôll use WSL2 with Docker-CE since it‚Äôs the fastest and most
    straightforward of <a
      href="https://docs.ddev.com/en/stable/users/install/docker-installation/#windows"
      target="_blank"
      >several options</a
    >.
  </p>

  <h2 class="text-3xl mt-24">
    <small class="block font-mono text-xs text-gray-500">1/3</small>Install WSL2
    with Ubuntu
  </h2>

  <p>Run the following in PowerShell terminal:</p>

  <Terminal type="powershell" code={`> wsl --install`} />

  <p>You‚Äôll probably need to reboot.</p>

  <p>If you had previously installed WSL, update it:</p>

  <Terminal type="powershell" code={`> wsl --update`} />
  
  <p>Then, install an Ubuntu distro named "DDEV":</p>

  <Terminal type="powershell" code={`> wsl --install Ubuntu --name DDEV`} />
  
  <p>Verify that you now have an Ubuntu distro set as default:</p>

  <Terminal
    type="powershell"
    code={`> wsl -l -v\n  NAME                   STATE           VERSION\n* DDEV                   Stopped         2`}
  />
</div>

<div class="prose dark:prose-invert">
  <h2 class="text-3xl mt-24">
    <small class="block font-mono text-xs text-gray-500">2/3</small>
    Run the Installer
  </h2>

  <div class="not-prose mb-6 grid grid-cols-1 sm:grid-cols-2 gap-4 text-center">
    <CtaButton
      text="Download for AMD64 ‚Üì\n(Intel/AMD)"
      href={`https://github.com/ddev/ddev/releases/download/${latestVersion}/ddev_windows_amd64_installer.${latestVersion}.exe`}
      title="For computers with Intel or AMD processors (most common)"
    />
    <CtaButton
      text="Download for ARM64 ‚Üì\n(Snapdragon)"
      href={`https://github.com/ddev/ddev/releases/download/${latestVersion}/ddev_windows_arm64_installer.${latestVersion}.exe`}
      title="For computers with ARM processors like Qualcomm Snapdragon"
    />
  </div>

  <p>Run the installer selecting the preferred "Docker CE" approach and selecting your "DDEV" distro. You can also find all releases at <a href="https://github.com/ddev/ddev/releases">DDEV Releases</a>.</p>

  <p>
    In the ‚ÄúDDEV‚Äù terminal app or Windows Terminal "DDEV" profile, confirm that the <code>ddev</code> binary is
    installed: üéâ
  </p>
  <Terminal
    type="powershell-ubuntu"
    code={`$ ddev --version\nddev version ${latestVersion}`}
  />
</div>

<div class="prose dark:prose-invert">
  <h2 class="text-3xl mt-24">
    <small class="block font-mono text-xs text-gray-500">{itemNumber}</small>Create a
    Project
  </h2>

  <p>Tip: Watch the <a href="/blog/watch-ddev-local-from-scratch-with-windows-wsl2/">video tutorial</a> showing all of this.</p>

  <p><strong>Important:</strong> Work inside the WSL2 "DDEV" distro, not on your Windows C:\ drive. Open the "DDEV" app from your Start menu to access the Linux terminal.</p>

  <p>To view files from Windows Explorer or your IDE: <code>Explorer > Linux > DDEV > home > [your-username]</code></p>

  <p>Create a directory for your project:</p>
  <Terminal type={terminalType} code={`${terminalSymbol} mkdir -p ~/dev/my-project && cd ~/dev/my-project`} />

  <p>
    Initialize the project by running the <a
      href="https://docs.ddev.com/en/stable/users/usage/commands/#config"
      target="_blank"
      ><code>ddev config</code></a>
    command:
  </p>
  <Terminal type={terminalType} code={`${terminalSymbol} ddev config`} />

  <p>
    Start the project for the first time. You'll use the same command to start
    it later, too!
  </p>
  <Terminal type={terminalType} code={`${terminalSymbol} ddev start`} />

  <p>
    If it's a Composer project, you may also need to run <a
      href="https://docs.ddev.com/en/stable/users/usage/commands/#composer"
      target="_blank"
      ><code>ddev composer install</code></a>.
  </p>

  <p>
    Now run the <a
      href="https://docs.ddev.com/en/stable/users/usage/commands/#launch"
      target="_blank">launch command</a
    > to open your project in a browser:
  </p>
  <Terminal type={terminalType} code={`${terminalSymbol} ddev launch`} />
</div>

<div class="prose dark:prose-invert">
  <h2 class="text-3xl mt-24">Explore & Enjoy!</h2>

  <p>
    Take a peek at your project's new <code>.ddev/</code> directory. You can add
    this to your repo to share your DDEV config, edit <code
      >.ddev/config.yaml</code
    > to change <a
      href="https://docs.ddev.com/en/stable/users/configuration/config/"
      target="_blank"
      >project options</a
    >, or even go about your business and pretend this folder doesn't exist.
  </p>

  <p>
    Run the <a
      href="https://docs.ddev.com/en/stable/users/usage/commands/#help"
      target="_blank"
      >help command</a>
    (or plain <code>ddev</code>) to see the actions you can take with the CLI:
  </p>

  <Terminal type={terminalType} code={`${terminalSymbol} ddev -h`} />

  <p>
    Use the <a
      href="https://docs.ddev.com/en/stable/users/usage/commands/#describe"
      target="_blank"
      >describe command</a>
    to see a project's parts and database connection details:
  </p>

  <Terminal type={terminalType} code={`${terminalSymbol} ddev describe`} />

  <p>
    If you're done working on a project and want to shut it down without
    removing anything, use the <a
      href="https://docs.ddev.com/en/stable/users/usage/commands/#stop"
      target="_blank"
      >stop command</a>:
  </p>

  <Terminal type={terminalType} code={`${terminalSymbol} ddev stop`} />

  <p>
    If you were just kicking the tires and you want to permanently delete the
    project and its resources without touching your code, run the <a
      href="https://docs.ddev.com/en/stable/users/usage/commands/#delete"
      target="_blank"
      >delete command</a>:
  </p>

  <Terminal type={terminalType} code={`${terminalSymbol} ddev delete`} />

  <p>
    DDEV will remove everything it created for the project and have no memory of
    its existence.
  </p>
</div>

<div class="prose dark:prose-invert">
  <p></p>

  <p>
    To <a href="https://docs.ddev.com/en/stable/users/usage/uninstall/" target="_blank">uninstall</a> DDEV, first clean up its Docker bits and delete its files from
    your system:
  </p>

  <Terminal
    type="powershell-ubuntu"
    code={`$ ddev clean --all\n$ ddev hostname --remove-inactive\n$ rm -r ~/.ddev`}
  />

  <p>
    Remove the <code>ddev</code> binary from the WSL2 distro:
  </p>

  <Terminal type="powershell-ubuntu" code={`$ sudo apt-get remove ddev ddev-wsl2`} />

  <p>
    Lastly, remove DDEV from Windows by visiting <i>Add or remove programs</i>,
    finding ‚ÄúDDEV‚Äù, and choosing <i>Uninstall</i>. If you do not need the "DDEV" distro, you can also remove it by running <code>wsl --unregister DDEV</code>.
  </p>

  <CommunityCTA />
</div>
